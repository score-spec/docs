---
title: "Kind cluster"
linkTitle: "Kind cluster"
description: "How to set up a Kind to use score-k8s"
weight: 1
---

Any Kubernetes cluster can be used in order to deploy the `manifests.yaml` file generated by `score-k8s generate`.

This page show you how you can configure a [Kind](https://kind.sigs.k8s.io/) cluster with either the [Gateway API](https://kubernetes.io/docs/concepts/services-networking/gateway/) or an [Ingress controller](https://kubernetes.io/docs/concepts/services-networking/ingress-controllers/) if you want to expose your workloads via a `dns`/`route`.

## Create a Kind cluster

```bash
cat <<EOF | kind create cluster --config=-
kind: Cluster
apiVersion: kind.x-k8s.io/v1alpha4
nodes:
- role: control-plane
  extraPortMappings:
  - containerPort: 31000
    hostPort: 80
    protocol: TCP
EOF
```

From there, you can configure in this cluster:
- Either a [Gateway API](#configure-a-gateway-api)
- Or an [Ingress controller](#configure-an-ingress-controller)

## Configure a Gateway API

Install the latest Gateway API CRDs in the Kind cluster:

```bash
GATEWAY_API_VERSION=$(curl -sL https://api.github.com/repos/kubernetes-sigs/gateway-api/releases/latest | jq -r .tag_name)
kubectl apply \
    -f https://github.com/kubernetes-sigs/gateway-api/releases/download/${GATEWAY_API_VERSION}/standard-install.yaml
```

Install the Nginx Gateway API implementation in the Kind cluster:

```
helm upgrade ngf oci://ghcr.io/nginxinc/charts/nginx-gateway-fabric \
    --install \
    --create-namespace \
    -n nginx-gateway \
    --set service.type=NodePort \
    --set-json 'service.ports=[{"port":80,"nodePort":31000}]'
```

Install a default `Gateway` in the `default` `Namespace` in the Kind cluster:

```bash
kubectl apply -f - <<EOF
apiVersion: gateway.networking.k8s.io/v1
kind: Gateway
metadata:
  name: default
spec:
  gatewayClassName: nginx
  listeners:
  - name: http
    port: 80
    protocol: HTTP
    allowedRoutes:
      namespaces:
        from: All
EOF
```

From here, by using the [default provisioners with `score-k8s init`](/docs/score-implementation/score-k8s/resources-provisioners/), you will be able to use this `Gateway` by using the `route` object which will generate an `HTTPRoute` link to this `Gateway`.

This default `HTTPRoute` is assuming that `Gateway` is in the same `Namespace`, but if you want to use the [cross-Namespace Gateway](https://gateway-api.sigs.k8s.io/guides/multiple-ns/) approach, you will need to use [this community provisioner](https://github.com/score-spec/community-provisioners/blob/main/route/score-k8s/10-shared-gateway-httproute.provisioners.yaml) instead:

```bash
score-k8s init \
    --provisioners https://raw.githubusercontent.com/score-spec/community-provisioners/refs/heads/main/route/score-k8s/10-shared-gateway-httproute.provisioners.yaml
```

## Configure an Ingress controller

Install the Nginx Ingress controller in the Kind cluster:

```bash
kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/main/deploy/static/provider/kind/deploy.yaml
```

From here, you can now use [this community provisioner](https://github.com/score-spec/community-provisioners/blob/main/route/score-k8s/10-ingress-route.provisioners.yaml) to generate an `Ingress` for the `route` resource instead of the default `HTTPRoute`:

```bash
score-k8s init \
    --provisioners https://raw.githubusercontent.com/score-spec/community-provisioners/refs/heads/main/route/score-k8s/10-ingress-route.provisioners.yaml
```

## Next steps

- [**Explore more examples**](/docs/examples/): Check out more examples to dive into further use cases and experiment with different configurations.
- [**Join the Score community**]({{< relref "/docs/community" >}}): Connect with fellow Score developers on our CNCF Slack channel or start find your way to contribute to Score.