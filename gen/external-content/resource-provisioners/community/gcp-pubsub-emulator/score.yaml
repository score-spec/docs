apiVersion: score.dev/v1b1
metadata:
  name: my-workload
containers:
  my-container:
    image: busybox
    command: ["/bin/sh"]
    args: ["-c", "while true; do echo $PUBSUB_EMULATOR_HOST; sleep 5; done"]
    variables:
      PUBSUB_HOST: "${resources.pubsub.host}"
      PUBSUB_PORT: "${resources.pubsub.port}"
      PUBSUB_PROJECT_ID: "${resources.pubsub.project_id}"
      PUBSUB_EMULATOR_HOST: "${resources.pubsub.emulator_host}"
resources:
  pubsub:
    type: gcp-pubsub-emulator
    params:
      project_id: my-test-project
